{"ast":null,"code":"var _jsxFileName = \"/home/rguktrkvalley/my_new_project/frontend/src/components/sideComponents/Announcements.js\",\n  _s = $RefreshSig$();\n// Announcements.js\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Modal from \"./Modal\"; // Import the Modal component\nimport styles from './Announcements.module.css'; // Import your CSS styles\nimport { useUser } from \"../context/UserContext\"; // Import the UserContext\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Announcements = ({\n  userType\n}) => {\n  _s();\n  const {\n    user\n  } = useUser(); // Get user from context\n  const [announcements, setAnnouncements] = useState([]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  useEffect(() => {\n    const fetchAnnouncements = async () => {\n      try {\n        const response = await axios.get(\"http://localhost:5000/announcements\");\n        setAnnouncements(response.data);\n      } catch (error) {\n        console.error(\"Error fetching announcements:\", error);\n      }\n    };\n    fetchAnnouncements();\n  }, []);\n  const handleCreateAnnouncement = async e => {\n    e.preventDefault();\n    try {\n      const response = await axios.post(\"http://localhost:5000/announcements\", {\n        title,\n        description,\n        createdBy: user._id // Use the user ID from the context\n      });\n      setAnnouncements(prev => [...prev, response.data]);\n      setIsModalOpen(false); // Close the modal after submission\n      setTitle(\"\"); // Clear the title input\n      setDescription(\"\"); // Clear the description input\n    } catch (error) {\n      console.error(\"Error creating announcement:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.announcements,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Announcements\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.announcementList,\n      children: announcements.map(announcement => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.announcementCard,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: announcement.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: announcement.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Created by: \", announcement.createdBy.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Date: \", new Date(announcement.createdAt).toLocaleDateString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this)]\n      }, announcement._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), (userType === \"admin\" || userType === \"faculty\") && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.createButton,\n        onClick: () => setIsModalOpen(true),\n        children: \"Create Announcement\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: isModalOpen,\n        onClose: () => setIsModalOpen(false),\n        onSubmit: handleCreateAnnouncement,\n        title: title,\n        setTitle: setTitle,\n        description: description,\n        setDescription: setDescription\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n_s(Announcements, \"vETS3jrCtuRZ1mpCxQRCq7VyngU=\", false, function () {\n  return [useUser];\n});\n_c = Announcements;\nexport default Announcements;\nvar _c;\n$RefreshReg$(_c, \"Announcements\");","map":{"version":3,"names":["React","useEffect","useState","axios","Modal","styles","useUser","jsxDEV","_jsxDEV","Fragment","_Fragment","Announcements","userType","_s","user","announcements","setAnnouncements","isModalOpen","setIsModalOpen","title","setTitle","description","setDescription","fetchAnnouncements","response","get","data","error","console","handleCreateAnnouncement","e","preventDefault","post","createdBy","_id","prev","className","children","fileName","_jsxFileName","lineNumber","columnNumber","announcementList","map","announcement","announcementCard","name","Date","createdAt","toLocaleDateString","createButton","onClick","isOpen","onClose","onSubmit","_c","$RefreshReg$"],"sources":["/home/rguktrkvalley/my_new_project/frontend/src/components/sideComponents/Announcements.js"],"sourcesContent":["// Announcements.js\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Modal from \"./Modal\"; // Import the Modal component\nimport styles from './Announcements.module.css'; // Import your CSS styles\nimport { useUser  } from \"../context/UserContext\"; // Import the UserContext\n\nconst Announcements = ({ userType }) => {\n  const { user } = useUser (); // Get user from context\n  const [announcements, setAnnouncements] = useState([]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n\n  useEffect(() => {\n    const fetchAnnouncements = async () => {\n      try {\n        const response = await axios.get(\"http://localhost:5000/announcements\");\n        setAnnouncements(response.data);\n      } catch (error) {\n        console.error(\"Error fetching announcements:\", error);\n      }\n    };\n\n    fetchAnnouncements();\n  }, []);\n\n  const handleCreateAnnouncement = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await axios.post(\"http://localhost:5000/announcements\", {\n        title,\n        description,\n        createdBy: user._id, // Use the user ID from the context\n      });\n      setAnnouncements((prev) => [...prev, response.data]);\n      setIsModalOpen(false); // Close the modal after submission\n      setTitle(\"\"); // Clear the title input\n      setDescription(\"\"); // Clear the description input\n    } catch (error) {\n      console.error(\"Error creating announcement:\", error);\n    }\n  };\n\n  return (\n    <div className={styles.announcements}>\n      <h1>Announcements</h1>\n      <div className={styles.announcementList}>\n        {announcements.map((announcement) => (\n          <div key={announcement._id} className={styles.announcementCard}>\n            <h3>{announcement.title}</h3>\n            <p>{announcement.description}</p>\n            <p>Created by: {announcement.createdBy.name}</p> {/* Assuming createdBy has a name field */}\n            <p>Date: {new Date(announcement.createdAt).toLocaleDateString()}</p>\n          </div>\n        ))}\n      </div>\n      {(userType === \"admin\" || userType === \"faculty\") && (\n        <>\n          <button\n            className={styles.createButton}\n            onClick={() => setIsModalOpen(true)}\n          >\n            Create Announcement\n          </button>\n          <Modal\n            isOpen={isModalOpen}\n            onClose={() => setIsModalOpen(false)}\n            onSubmit={handleCreateAnnouncement}\n            title={title}\n            setTitle={setTitle}\n            description={description}\n            setDescription={setDescription}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Announcements;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}